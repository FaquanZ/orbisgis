<?xml version="1.0"?>
<project name="org.orbisgis" default="source" basedir="BASEDIR">
	<target name="source">
		<move file="target/site/apidocs" todir="." />
		<move file="plugin-manager/docs/reference" todir="." />
		<zip destfile="target/SOURCE_FILE_NAME" basedir="." excludes="**/target/**, **/.svn/**" />
	</target>
	<target name="copy-plugin">
		<copy todir="DESTINATION" overwrite="true">
			<fileset dir="PLUGIN_DIR">
				<include name="plugin.xml" />
				<include name="schema/*" />
			</fileset>
		</copy>
	</target>
	<target name="copy-jars">
		<copy todir="LIB_DIR" overwrite="true" flatten="true">
			<fileset dir="JAR_SOURCE" includes="**/*.jar, **/*.zip" />
		</copy>
	</target>
	<target name="zip-binary">
		<zip destfile="target/BIN_FILE_NAME">
			<zipfileset dir="BIN_FOLDER" filemode="755" prefix="orbisgis" includes="orbisgis.sh" />
			<zipfileset dir="BIN_FOLDER" prefix="orbisgis" includes="**/*" 
				excludes="orbisgis.sh, orbisgis.sh.installer, orbisgis.bat.installer" />
		</zip>
	</target>
	<target name="build-installer-structure">
		<bunzip2 src="linux/jdk.bz2" dest="linux/jdk.tar" />
		<untar src="linux/jdk.tar" dest="linux" />
		<bunzip2 src="windows/jdk.bz2" dest="windows/jdk.tar" />
		<untar src="windows/jdk.tar" dest="windows" />
		<copy todir="bin">
			<fileset dir="BIN_FOLDER" includes="**/*" />
		</copy>
		<move overwrite="true" file="bin/orbisgis.sh.installer" tofile="bin/orbisgis.sh" />
		<move overwrite="true" file="bin/orbisgis.bat.installer" tofile="bin/orbisgis.bat" />
	</target>
</project>